import{c as r,I as w,r as d,l as X,m as g,w as i,H as b,j as c,o as p,u as P,g as H,t as v,f as z,n as Y,d as R,e as Z}from"./index--DsxGv_H.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};function V(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),l.forEach(function(n){ee(a,n,e[n])})}return a}function ee(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var x=function(t,e){var l=V({},t,e.attrs);return r(w,V({},l,{icon:K}),null)};x.displayName="UpOutlined";x.inheritAttrs=!1;var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};function L(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),l.forEach(function(n){ae(a,n,e[n])})}return a}function ae(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var k=function(t,e){var l=L({},t,e.attrs);return r(w,L({},l,{icon:te}),null)};k.displayName="HomeOutlined";k.inheritAttrs=!1;var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};function $(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),l.forEach(function(n){le(a,n,e[n])})}return a}function le(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}var j=function(t,e){var l=$({},t,e.attrs);return r(w,$({},l,{icon:ne}),null)};j.displayName="ReloadOutlined";j.inheritAttrs=!1;const re={style:{"margin-left":"30px","font-size":"18px"}},oe={key:0},ie=["onClick"],ce={key:1},ue={__name:"Tools",setup(a){const t=[{title:"Name",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"Path",dataIndex:"path"},{title:"Size",dataIndex:"size",key:"size",sorter:(o,s)=>o.size-s.size,sortDirections:["descend"],sortOrder:"descend",scopedSlots:{customRender:"size"}},{title:"Items",dataIndex:"items"},{title:"Percent",key:"percent",scopedSlots:{customRender:"percent"},width:"15%"}],e=d([]),l=d([]),n=d([]),f=d(!0),h=d([]),N={title:"name",key:"path"};d(!1);const B=()=>{b.get("api/tools/dirtree").then(o=>{h.value=o.data})},m=()=>{f.value=!0,e.value=[],b.post("api/tools/get",{path:n.value}).then(o=>{o.data&&(e.value=o.data,l.value=e.value.child),f.value=!1})},I=()=>{f.value=!0,e.value=[],b.get("api/tools/scan").then(o=>{e.value=o.data,l.value=e.value.child,f.value=!1})},A=()=>{n.value=[],m()},M=()=>{n.value.splice(-1,1),m()},T=o=>{n.value.push(o),m()},U=o=>{console.log(o),n.value=o[0].split("/"),m()},E=o=>new Promise(s=>{if(o.dataRef.children){s();return}b.get("api/tools/dirtree?path="+o.dataRef.path).then(O=>{o.dataRef.children=O.data,h.value=[...h.value],s()})});return X(()=>{m(),B()}),(o,s)=>{const O=c("a-tree"),F=c("a-card"),_=c("a-col"),y=c("a-button"),G=c("a-button-group"),D=c("a-row"),q=c("a-tooltip"),J=c("a-progress"),Q=c("a-table"),W=c("router-view");return p(),g("div",null,[r(D,{gutter:16},{default:i(()=>[r(_,{span:5},{default:i(()=>[r(F,{title:"Tree"},{default:i(()=>[r(O,{treeData:h.value,fieldNames:N,loadData:E,onSelect:U},null,8,["treeData"])]),_:1})]),_:1}),r(_,{span:19},{default:i(()=>[r(Q,{columns:t,dataSource:l.value,childrenColumnName:"",size:"middle",loading:f.value,pagination:!1},{title:i(()=>[r(D,null,{default:i(()=>[r(_,{flex:"none"},{default:i(()=>[r(G,null,{default:i(()=>[r(y,{type:"primary",onClick:A,disabled:n.value.length===0},{icon:i(()=>[r(P(k))]),_:1},8,["disabled"]),r(y,{type:"primary",onClick:M,disabled:n.value.length===0},{icon:i(()=>[r(P(x))]),_:1},8,["disabled"])]),_:1})]),_:1}),r(_,{flex:"auto"},{default:i(()=>[H("b",re,v(e.value.path),1)]),_:1}),r(_,{flex:"none"},{default:i(()=>[r(y,{type:"primary",onClick:I},{icon:i(()=>[r(P(j))]),default:i(()=>[s[0]||(s[0]=z(" ReScan "))]),_:1})]),_:1})]),_:1})]),bodyCell:i(({column:S,record:u})=>[S.key==="name"?(p(),g(Y,{key:0},[u.items?(p(),g("div",oe,[H("a",{onClick:C=>T(u.name)},v(u.name),9,ie)])):(p(),g("div",ce,v(u.name),1))],64)):S.key==="size"?(p(),R(q,{key:1,placement:"right",title:u.size+" bytes"},{default:i(()=>[z(v(o.$filters.bytesToSize(u.size)),1)]),_:2},1032,["title"])):S.key==="percent"?(p(),R(J,{key:2,percent:Math.round(100/e.value.size*u.size),status:"normal"},{format:i(C=>[z(v(C)+"% ",1)]),_:2},1032,["percent"])):Z("",!0)]),_:1},8,["dataSource","loading"]),r(W)]),_:1})]),_:1})])}}};export{ue as default};
